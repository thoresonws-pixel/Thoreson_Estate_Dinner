<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Thoreson Estate Dinner</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', Georgia, serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e8e8e8;
        }

        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(26, 26, 46, 0.95);
            border-bottom: 1px solid #c9a227;
            padding: 15px 0;
            z-index: 1000;
        }

        nav ul {
            display: flex;
            justify-content: center;
            gap: 40px;
            list-style: none;
            flex-wrap: wrap;
        }

        nav a {
            color: #c9a227;
            text-decoration: none;
            font-size: 16px;
            letter-spacing: 2px;
            text-transform: uppercase;
            transition: all 0.3s;
            cursor: pointer;
        }

        nav a:hover {
            color: #fff;
            text-shadow: 0 0 10px #c9a227;
        }

        nav a.active {
            color: #fff;
            text-shadow: 0 0 10px #c9a227;
        }

        .logout-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #c9a227;
            color: #1a1a2e;
            border: none;
            padding: 8px 16px;
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 14px;
            cursor: pointer;
            border-radius: 3px;
            letter-spacing: 1px;
            transition: all 0.3s;
            z-index: 999;
        }

        .logout-btn:hover {
            background: #e8c55a;
            transform: scale(1.05);
        }

        section {
            display: none;
            min-height: 100vh;
            padding: 100px 20px 60px;
            max-width: 1000px;
            margin: 0 auto;
        }

        section.active {
            display: block;
        }

        .section-title {
            font-family: 'Playfair Display', Georgia, serif;
            font-size: 48px;
            color: #c9a227;
            margin-bottom: 40px;
            text-align: center;
            letter-spacing: 2px;
        }

        .content-card {
            background: linear-gradient(145deg, #1a1a2e 0%, #16213e 100%);
            border: 2px solid #c9a227;
            border-radius: 5px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .content-title {
            font-family: 'Playfair Display', Georgia, serif;
            font-size: 24px;
            color: #c9a227;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .content-text {
            font-size: 16px;
            line-height: 1.8;
            color: #e8e8e8;
        }

        .content-list {
            list-style: none;
            padding-left: 20px;
        }

        .content-list li {
            margin-bottom: 12px;
            font-size: 16px;
        }

        .content-list li:before {
            content: "âœ¦ ";
            color: #c9a227;
            margin-right: 10px;
        }

        .clue-item {
            background: rgba(201, 162, 39, 0.1);
            border-left: 3px solid #c9a227;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 3px;
        }

        .clue-title {
            font-family: 'Playfair Display', Georgia, serif;
            font-size: 20px;
            color: #c9a227;
            margin-bottom: 10px;
        }

        .clue-content {
            font-size: 16px;
            line-height: 1.6;
            color: #e8e8e8;
        }

        .locked-clue {
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid #666;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 3px;
        }

        .locked-clue .clue-title {
            color: #999;
        }

        .locked-message {
            color: #999;
            font-style: italic;
        }

        .qr-scanner-btn {
            background: #c9a227;
            color: #1a1a2e;
            border: none;
            padding: 14px 30px;
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 16px;
            cursor: pointer;
            border-radius: 3px;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 600;
            transition: all 0.3s;
            margin-bottom: 30px;
        }

        .qr-scanner-btn:hover {
            background: #e8c55a;
            transform: scale(1.05);
        }

        .reset-btn {
            background: #d32f2f;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-family: 'Cormorant Garamond', Georgia, serif;
            font-size: 14px;
            cursor: pointer;
            border-radius: 3px;
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .reset-btn:hover {
            background: #b71c1c;
            transform: scale(1.05);
        }

        .master-controls {
            background: rgba(201, 162, 39, 0.1);
            border: 2px solid #c9a227;
            padding: 30px;
            border-radius: 5px;
            margin-bottom: 30px;
        }

        .control-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
            border-radius: 3px;
        }

        .control-item-title {
            font-size: 18px;
            color: #c9a227;
        }

        .unlock-all-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 3px;
            font-family: 'Cormorant Garamond', Georgia, serif;
            letter-spacing: 1px;
            transition: all 0.3s;
        }

        .unlock-all-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .unlock-all-btn.unlocked {
            background: #999;
            cursor: not-allowed;
        }

        .no-clues {
            text-align: center;
            padding: 40px;
            color: #999;
            font-style: italic;
        }

        .guest-list-inline {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .guest-card-inline {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #c9a227;
            padding: 15px;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .guest-card-inline:hover {
            border-color: #fff;
            background: rgba(201, 162, 39, 0.1);
            transform: translateY(-2px);
        }

        .guest-card-inline-name {
            color: #c9a227;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .guest-card-inline-irl {
            color: #999;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .guest-card-inline-desc {
            color: #e8e8e8;
            font-size: 13px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            nav ul {
                gap: 20px;
            }

            nav a {
                font-size: 14px;
            }

            .content-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a id="homeTab" class="tab-link active">Home</a></li>
            <li><a id="characterTab" class="tab-link">Character Background</a></li>
            <li><a id="cluesTab" class="tab-link">Clues</a></li>
            <li id="masterCluesNav" style="display: none;"><a id="masterCluesTab" class="tab-link">Master Clues</a></li>
        </ul>
    </nav>

    <button class="logout-btn" onclick="logout()">Logout</button>

    <!-- HOME SECTION -->
    <section id="homeSection" class="active">
        <h1 class="section-title">The Thoreson Estate</h1>
        
        <!-- INVITATION -->
        <div class="content-card">
            <div class="content-title">You Are Cordially Invited</div>
            <div class="content-text">
                to a dinner party at<br>
                <strong>The Thoreson Estate</strong><br>
                <br>
                March 21st, 1935<br>
                7:00 PM<br>
                <br>
                Black Tie Optional<br>
                RSVP to Scott Thoreson Jr.
            </div>
        </div>

        <!-- GUEST LIST -->
        <div class="content-card">
            <div class="content-title">Expected Guests</div>
            <p style="color: #999; font-size: 14px; margin-bottom: 20px;">Click to view public information about each guest</p>
            <div id="homeGuestList" class="guest-list-inline">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- COCKTAILS -->
        <div class="content-card">
            <div class="content-title">Cocktails</div>
            <div class="content-text" id="cocktailsContent">
                An exquisite selection of cocktails will be served before dinner.<br><br>
                <strong>The Manhattan</strong> - A classic blend of whiskey, vermouth, and bitters<br><br>
                <strong>The Martini</strong> - Gin and vermouth, stirred to perfection<br><br>
                <strong>The Daiquiri</strong> - Rum, lime juice, and simple syrup<br><br>
                <strong>The Sidecar</strong> - Cognac, Cointreau, and lemon juice<br><br>
                <strong>Champagne</strong> - A selection of fine French champagnes
            </div>
        </div>
    </section>

    <!-- CHARACTER BACKGROUND SECTION -->
    <section id="characterSection">
        <h1 class="section-title" id="characterName">Character Name</h1>
        <div id="characterContent">
            <!-- Populated by JavaScript -->
        </div>
    </section>

    <!-- CLUES SECTION -->
    <section id="cluesSection">
        <h1 class="section-title">Clues</h1>
        <button class="qr-scanner-btn" onclick="openQRScanner()">ðŸ“± Scan QR Code</button>
        <div id="cluesContent">
            <!-- Populated by JavaScript -->
        </div>
    </section>

    <!-- MASTER CLUES SECTION (SCOTT ONLY) -->
    <section id="masterCluesSection">
        <h1 class="section-title">Master Clues</h1>
        <div id="masterCluesContent">
            <!-- Populated by JavaScript -->
        </div>
    </section>

    <script>
        // Clue definitions
        const clueDatabase = {
            "Accounting": {
                type: "skill",
                skill: "Accounting",
                title: "Financial Ledger",
                content: "Hidden in the study: detailed financial records revealing mysterious payments to 'T.H.' over many years, large sums that don't correspond to any known business expenses."
            },
            "Botany": {
                type: "skill",
                skill: "Botany",
                title: "Botanical Analysis",
                content: "The flowers in the garden contain traces of Wolfsbane - a deadly poison. Someone has been cultivating this dangerous plant very carefully."
            },
            "French": {
                type: "skill",
                skill: "French",
                title: "French Correspondence",
                content: "A letter written in French, hidden in the library, reveals a decades-long affair and two children born from it. The emotional devastation is evident in every word."
            },
            "Investigation": {
                type: "skill",
                skill: "Investigation",
                title: "Crime Scene Evidence",
                content: "Detailed forensic analysis of the dining room reveals traces of poison in Will's wine glass. The poison was administered sometime during the first course."
            },
            "Legal": {
                type: "skill",
                skill: "Legal",
                title: "Forged Documents",
                content: "A will dated 30 years ago shows clear signs of forgery. The original company documents reveal that Will Thoreson stole his business partner's company through manipulation and false documents."
            },
            "Medical": {
                type: "skill",
                skill: "Medical",
                title: "Autopsy Report",
                content: "Medical examination confirms death by Wolfsbane poisoning. The poison was administered orally, likely mixed into food or drink. Death would have occurred within 2-3 hours of ingestion."
            }
        };

        const storyClues = {
            "willsDeath": {
                title: "Will's Death Announced",
                content: "William Thoreson Sr. has been found dead in the study. The death appears sudden and mysterious. An investigation is underway."
            },
            "businessBetrayal": {
                title: "Business Partner Betrayal Discovered",
                content: "Documents have surfaced revealing that Will Thoreson stole his business partner Robert Hartley's company 25 years ago through forged documents and manipulation. Robert Hartley died shortly after, officially ruled a suicide."
            },
            "illegitimateChild": {
                title: "Illegitimate Child Revealed",
                content: "It has been discovered that Will Thoreson had an illegitimate child with Margaret Hartley, Robert's wife. The child was secretly supported with company funds for decades."
            },
            "poisoning": {
                title: "Poisoning Suspected",
                content: "Evidence suggests Will Thoreson was poisoned. Wolfsbane, a deadly toxin, has been found in traces at the scene. This was not a natural death."
            },
            "mirandasIdentity": {
                title: "Miranda's True Identity",
                content: "Miranda Hartley, Will's longtime assistant, is revealed to be Robert Hartley's daughter. She has been gathering evidence of Will's crimes for 25 years, waiting for the right moment."
            }
        };

        // Character data (simplified - full data would be loaded)
        const characterData = {
            "Scott": {
                character: "Scott Thoreson Jr.",
                backstory: "Eldest son of William Thoreson Sr. and family attorney. You've built a successful career managing both Thoreson Toys business and personal family affairs.",
                knowledge: "You know your father's business dealings but not his personal secrets.",
                secret: "None - you genuinely don't know what your father plans to announce tonight.",
                goals: [
                    "Keep the evening smooth and organized",
                    "Find out what your father's announcement is",
                    "Manage any family drama that arises"
                ],
                relationships: [
                    { name: "William Thoreson Sr.", relation: "Your father - respected but formal relationship" },
                    { name: "Frederick Thoreson", relation: "Your younger brother - warm but different life choices" },
                    { name: "Miranda Hartley", relation: "Your legal assistant for 10 years - trusted completely" }
                ]
            },
            "BrianT": {
                character: "Frederick Brian T. Thoreson",
                backstory: "You're Scott's younger brother, and you've never had much interest in anything serious. You don't have a job, don't have ambitions, and you're perfectly fine with that. You spend your days doing whatever entertains you.",
                knowledge: "You know your father is wealthy but you don't really know anything about his business.",
                secret: "None - you don't really have secrets because you don't care enough to hide anything.",
                goals: [
                    "Enjoy the free food and drinks",
                    "Have a good time",
                    "Maybe meet some interesting people"
                ],
                relationships: [
                    { name: "William Thoreson Sr.", relation: "Your father - he gives you money, you don't ask why" },
                    { name: "Scott Thoreson Jr.", relation: "Your older brother - he's way too serious about everything" }
                ]
            }
            // More characters would be added here...
        };

        let userSession = null;

        // Character guest list data
        const guestListData = [
            { character: "Scott Thoreson Jr.", irlName: "Scott", desc: "Eldest son and family attorney" },
            { character: "Frederick Brian T. Thoreson", irlName: "BrianT", desc: "Younger son, carefree" },
            { character: "Charlotte Clara Waverly", irlName: "Clara", desc: "Household manager and bartender" },
            { character: "Miranda Leanna Hartley", irlName: "Leanna", desc: "Scott's legal assistant" },
            { character: "Walter Lippman", irlName: "Marc", desc: "Journalist for the Dallas Herald" },
            { character: "Sophie Maisy Vanderpool", irlName: "Maisy", desc: "Marc's new wife" },
            { character: "Vivienne Ashford", irlName: "Hannah", desc: "Young Thoreson cousin" },
            { character: "David Richardson", irlName: "DJ", desc: "Family cousin" },
            { character: "Raymond Hammond", irlName: "Peter", desc: "Business Manager of Thoreson Toys" },
            { character: "Marcus Brennan", irlName: "Arash", desc: "Major investor" },
            { character: "Victoria Ashworth", irlName: "Becky", desc: "Major investor" },
            { character: "Thomas Bradford", irlName: "BrianS", desc: "Business rival" },
            { character: "Margaret Ashford", irlName: "Katie", desc: "Family friend" },
            { character: "Dorothy Wells", irlName: "Michelle", desc: "Society figure" },
            { character: "Charles Sterling", irlName: "Jeff", desc: "Retired banker" },
            { character: "Patricia Chamberlain", irlName: "Casey", desc: "Family friend" },
            { character: "Victoria Grant", irlName: "Krystal", desc: "Business partner's wife" },
            { character: "Elizabeth Monroe", irlName: "Lindsey", desc: "Family elder" },
            { character: "James Sterling", irlName: "Bradey", desc: "Young family member" },
            { character: "William Chamberlain", irlName: "Alexander", desc: "Young ward" },
            { character: "Robert Chamberlain", irlName: "Jesse", desc: "Young ward" }
        ];

        // Initialize on page load
        window.addEventListener('load', function() {
            const session = localStorage.getItem('userSession');
            if (!session) {
                window.location.href = 'login.html';
                return;
            }

            userSession = JSON.parse(session);
            
            // If master, auto-unlock all skills
            if (userSession.role === 'master') {
                userSession.unlockedSkills = ["Accounting", "Botany", "French", "Investigation", "Legal", "Medical"];
            }
            
            initializeUI();
            loadCharacterData();
            loadCluesData();
            loadCocktailContent();

            if (userSession.role === 'master') {
                document.getElementById('masterCluesNav').style.display = 'block';
                loadMasterClues();
            }
        });

        function initializeUI() {
            // Set up tab navigation
            document.getElementById('homeTab').addEventListener('click', () => showSection('homeSection'));
            document.getElementById('characterTab').addEventListener('click', () => showSection('characterSection'));
            document.getElementById('cluesTab').addEventListener('click', () => showSection('cluesSection'));
            if (userSession.role === 'master') {
                document.getElementById('masterCluesTab').addEventListener('click', () => showSection('masterCluesSection'));
            }

            // Load guest list in home section
            loadGuestListInHome();
            
            // Load cocktail recipes if user is Clara
            loadCocktailContent();
        }

        function loadGuestListInHome() {
            const guestListEl = document.getElementById('homeGuestList');
            if (!guestListEl) return;

            guestListEl.innerHTML = guestListData
                .map(guest => `
                    <div class="guest-card-inline">
                        <div class="guest-card-inline-name">${guest.character}</div>
                        <div class="guest-card-inline-irl">(${guest.irlName})</div>
                        <div class="guest-card-inline-desc">${guest.desc}</div>
                    </div>
                `)
                .join('');
        }

        function loadCocktailContent() {
            const cocktailsEl = document.getElementById('cocktailsContent');
            if (!cocktailsEl) return;

            if (userSession.username === 'Clara' || userSession.role === 'master') {
                cocktailsEl.innerHTML = `
                    <strong>The Manhattan</strong><br>
                    2 oz whiskey, 1 oz sweet vermouth, 2 dashes Angostura bitters<br>
                    Stir with ice, strain into coupe glass, garnish with cherry<br><br>

                    <strong>The Martini</strong><br>
                    2.5 oz gin, 0.5 oz dry vermouth<br>
                    Stir with ice, strain into martini glass, garnish with olive or lemon twist<br><br>

                    <strong>The Daiquiri</strong><br>
                    2 oz rum, 1 oz fresh lime juice, 0.75 oz simple syrup<br>
                    Shake with ice, strain into coupe glass<br><br>

                    <strong>The Sidecar</strong><br>
                    1.5 oz cognac, 1 oz Cointreau, 0.75 oz fresh lemon juice<br>
                    Shake with ice, strain into coupe glass, garnish with lemon twist<br><br>

                    <strong>Champagne</strong><br>
                    Serve chilled. A selection of fine French champagnes including vintage and non-vintage varieties.
                `;
            }
        }

        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Update nav
            document.querySelectorAll('.tab-link').forEach(link => link.classList.remove('active'));
            if (sectionId === 'homeSection') document.getElementById('homeTab').classList.add('active');
            else if (sectionId === 'characterSection') document.getElementById('characterTab').classList.add('active');
            else if (sectionId === 'cluesSection') document.getElementById('cluesTab').classList.add('active');
            else if (sectionId === 'masterCluesSection') document.getElementById('masterCluesTab').classList.add('active');
        }

        function loadCharacterData() {
            const charData = characterData[userSession.username] || characterData["Scott"]; // Default to Scott
            document.getElementById('characterName').textContent = charData.character;

            let html = `
                <div class="content-card">
                    <div class="content-title">Backstory</div>
                    <div class="content-text">${charData.backstory}</div>
                </div>
                <div class="content-card">
                    <div class="content-title">What You Know</div>
                    <div class="content-text">${charData.knowledge}</div>
                </div>
                <div class="content-card">
                    <div class="content-title">Your Secrets</div>
                    <div class="content-text">${charData.secret}</div>
                </div>
                <div class="content-card">
                    <div class="content-title">Your Goals for Tonight</div>
                    <ul class="content-list">
                        ${charData.goals.map(goal => `<li>${goal}</li>`).join('')}
                    </ul>
                </div>
                <div class="content-card">
                    <div class="content-title">Key Relationships</div>
                    <ul class="content-list">
                        ${charData.relationships.map(rel => `<li><strong>${rel.name}</strong> - ${rel.relation}</li>`).join('')}
                    </ul>
                </div>
            `;

            document.getElementById('characterContent').innerHTML = html;
        }

        function loadCluesData() {
            let html = '';

            if (userSession.skills && userSession.skills.length > 0) {
                userSession.skills.forEach(skill => {
                    const clue = clueDatabase[skill];
                    const isUnlocked = userSession.unlockedSkills.includes(skill);

                    if (isUnlocked) {
                        html += `
                            <div class="clue-item">
                                <div class="clue-title">âœ¦ ${clue.title}</div>
                                <div class="clue-content">${clue.content}</div>
                            </div>
                        `;
                    } else {
                        html += `
                            <div class="locked-clue">
                                <div class="clue-title">${clue.title}</div>
                                <div class="locked-message">Locked - Scan QR code at the party to unlock</div>
                            </div>
                        `;
                    }
                });
            }

            // Add story clues
            Object.entries(storyClues).forEach(([key, clue]) => {
                const isUnlocked = userSession.unlockedStoryClues.includes(key);

                if (isUnlocked) {
                    html += `
                        <div class="clue-item">
                            <div class="clue-title">âœ¦ ${clue.title}</div>
                            <div class="clue-content">${clue.content}</div>
                        </div>
                    `;
                }
            });

            if (html === '') {
                html = '<div class="no-clues">No clues unlocked yet. Check back as the evening unfolds...</div>';
            }

            document.getElementById('cluesContent').innerHTML = html;
        }

        function loadMasterClues() {
            let html = '<div class="master-controls">';

            html += '<div class="content-title" style="margin-bottom: 20px;">Story Clue Controls</div>';

            Object.entries(storyClues).forEach(([key, clue]) => {
                const isUnlocked = userSession.unlockedStoryClues.includes(key);
                html += `
                    <div class="control-item">
                        <div class="control-item-title">${clue.title}</div>
                        <button class="unlock-all-btn ${isUnlocked ? 'unlocked' : ''}" 
                                onclick="unlockStoryClue('${key}')"
                                ${isUnlocked ? 'disabled' : ''}>
                            ${isUnlocked ? 'Unlocked' : 'Unlock for All'}
                        </button>
                    </div>
                `;
            });

            html += '</div>';

            // Show all skill-based clues for reference
            html += '<div class="content-title">Skill-Based Clues (Reference)</div>';
            Object.entries(clueDatabase).forEach(([skill, clue]) => {
                if (clue.type === 'skill') {
                    html += `
                        <div class="clue-item">
                            <div class="clue-title">${clue.title}</div>
                            <div class="clue-content">${clue.content}</div>
                        </div>
                    `;
                }
            });

            if (userSession.username === 'TestUser1' || userSession.username === 'TestUser2') {
                html += `
                    <div class="content-card">
                        <button class="reset-btn" onclick="resetAccount()">Reset Testing Account</button>
                    </div>
                `;
            }

            document.getElementById('masterCluesContent').innerHTML = html;
        }

        function unlockStoryClue(clueKey) {
            if (!userSession.unlockedStoryClues.includes(clueKey)) {
                userSession.unlockedStoryClues.push(clueKey);
                localStorage.setItem('userSession', JSON.stringify(userSession));

                // Reload clues for current user
                loadCluesData();

                // Reload master clues UI
                if (userSession.role === 'master') {
                    loadMasterClues();
                }
            }
        }

        function openQRScanner() {
            // For now, this will be a simple modal
            // In a real implementation, this would use the browser's camera API
            const skill = prompt("Enter the skill name you want to unlock:\nAccounting, Botany, French, Investigation, Legal, Medical");

            if (skill) {
                unlockSkill(skill);
            }
        }

        function unlockSkill(skill) {
            if (!userSession.unlockedSkills.includes(skill)) {
                userSession.unlockedSkills.push(skill);
                localStorage.setItem('userSession', JSON.stringify(userSession));
                loadCluesData();
                alert(`âœ“ Skill unlocked: ${skill}`);
            } else {
                alert(`You've already unlocked: ${skill}`);
            }
        }

        function resetAccount() {
            if (confirm('Are you sure you want to reset this account? All unlocked content will be cleared.')) {
                userSession.unlockedSkills = [];
                userSession.unlockedStoryClues = [];
                localStorage.setItem('userSession', JSON.stringify(userSession));
                loadCluesData();
                loadMasterClues();
                alert('Account reset complete!');
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('userSession');
                window.location.href = 'login.html';
            }
        }
    </script>
</body>
</html>
